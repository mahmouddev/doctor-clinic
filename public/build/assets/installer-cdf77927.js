import{_ as w,a as h,c as n,b as a,l as d,t as _,j as i,n as p,w as c,v as m,g as b,F as v,r as y,o as r,s as f,u as k}from"./_plugin-vue_export-helper-77894273.js";const C={name:"Installer",props:{},data(){return{errors:[],login_url:window.installer.login_url,error_message:"",name:null,loader:!1,permissions_page:!1,permissions_button:!1,complete_installation_button:!1,requirements_page:!1,complete_installation_page:!1,page:"",app_name:"Doctor Clinic",app_timezone:null,database_connection:1,database_host:"localhost",database_port:"3306",database_name:"clinic",database_user_name:"homestead",database_password:"secret",connection_exists:!1,finished:!1,finalEnvFile:null,finalStatusMessage:null,finalMessages:null,dbOutputLog:null,is_sub_directory:window.installer.is_sub_directory,timezones:window.installer.timezones,host:window.installer.host}},methods:{requirements(){this.loader=!0,h.get(window.installer.requirements_url).then(l=>{this.loader=!1,this.page=l.data.html,this.requirements_page=!0,l.data.status&&(this.permissions_button=!0)}).catch(l=>{this.loader=!1,this.error_message="Something Went Wrong"})},permissions(){this.loader=!0,h.get(window.installer.permissions_url).then(l=>{this.requirements_page=!1,this.permission_page=!0,this.page=l.data.html,this.loader=!1,l.data.status&&(this.complete_installation_button=!0)}).catch(l=>{this.loader=!1,this.error_message="Something Went Wrong"})},testConnection(){if(this.validator("test_db")){this.loader=!0;const t={database_connection:this.database_connection==1?"mysql":this.database_connection==2?"pgsql":"null",database_hostname:this.database_host,database_port:this.database_port,database_name:this.database_name,database_user_name:this.database_user_name,database_password:this.database_password};h.post(window.installer.test_connection_url,t).then(s=>{s.data&&s.data.status_code&&s.data.status_code==200?this.connection_exists=!0:s.data&&s.data.status_code&&s.data.status_code==422&&s.data.errors?this.errors.database_connection=s.data.errors.database_connection[0]:this.error_message="Could not connect to the database",this.loader=!1}).catch(s=>{this.loader=!1,this.error_message="Could not connect to the database"})}},completeInstallation(){if(this.validator("test_db",!0)){this.loader=!0;const t={app_name:this.app_name,app_timezone:this.app_timezone,database_connection:this.database_connection==1?"mysql":this.database_connection==2?"pgsql":"null",database_hostname:this.database_host,database_port:this.database_port,database_name:this.database_name,database_username:this.database_user_name,database_password:this.database_password};h.post(window.installer.complete_installation_url,t).then(s=>{s.data&&s.data.status_code&&s.data.status_code==422&&s.data.errors?(console.log("422"),s.data.errors.app_name&&(this.errors.app_name=s.data.errors.app_name[0]),s.data.errors.app_timezone&&(this.errors.app_timezone=s.data.errors.app_timezone[0]),s.data.errors.database_connection&&(this.errors.database_connection=s.data.errors.database_connection[0]),s.data.errors.database_hostname&&(this.errors.database_host=s.data.errors.database_hostname[0]),s.data.errors.database_port&&(this.errors.database_port=s.data.errors.database_port[0]),s.data.errors.database_name&&(this.errors.database_name=s.data.errors.database_name[0]),s.data.errors.database_username&&(this.errors.database_user_name=s.data.errors.database_username[0]),s.data.errors.database_password&&(this.errors.database_password=s.data.errors.database_password[0])):s.data&&s.data.status_code&&s.data.status_code==500?(console.log("500"),this.error_message=s.data.errors):s.data&&s.data.status_code&&s.data.status_code==200?(console.log("200"),this.dbOutputLog=s.data.dbOutputLog,this.finalMessages=s.data.final.finalMessages,this.finalStatusMessage=s.data.final.finalStatusMessage,this.finalEnvFile=s.data.final.finalEnvFile,this.finished=!0):this.error_message="Something went wrong",this.loader=!1}).catch(s=>{this.error_message="Something went wrong",this.loader=!1})}},valuesChangedAfterTest(){this.connection_exists=!1},changeDBConnection(){this.connection_exists=!1,this.database_connection==1?(this.database_port=="5432"&&(this.database_port="3306"),this.database_user_name=="postgres"&&(this.database_user_name="root")):this.database_connection==2&&(this.database_port=="3306"&&(this.database_port=5432),this.database_user_name=="root"&&(this.database_user_name="postgres"))},completeInstallationPage(){this.permission_page=!1,this.complete_installation_page=!0},validator(l,t=!1){this.error_message=null,this.errors=[];let s=!1;return l=="test_db"&&(this.database_connection||(this.errors.database_connection="Database Connection required.",s=!0),this.database_host||(this.errors.database_host="Database Host  required.",s=!0),this.database_port||(this.errors.database_port="Database Port required.",s=!0),this.database_name||(this.errors.database_name="Database Name required.",s=!0),this.database_user_name||(this.errors.database_user_name="Database User Name required.",s=!0),t&&(this.app_name||(this.errors.app_name="App Name required.",s=!0)),this.app_timezone||(this.errors.app_timezone="App Timezone required.",s=!0)),!s}}},z={key:0,class:"alert alert-danger",id:"error_alert"},q={style:{margin:"0",color:"#fff","font-size":"15px","line-height":"1.6em"}},x=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),D={key:1},I=["innerHTML"],A={key:3,class:"loader"},M={class:"buttons"},T=a("i",{class:"fa fa-angle-right fa-fw","aria-hidden":"true"},null,-1),N=a("i",{class:"fa fa-angle-right fa-fw","aria-hidden":"true"},null,-1),S=a("i",{class:"fa fa-angle-right fa-fw","aria-hidden":"true"},null,-1),U=a("i",{class:"fa fa-angle-right fa-fw","aria-hidden":"true"},null,-1),V={key:4,class:"tabs tabs-full"},F={key:0},L={key:0,style:{margin:"0",padding:"0","font-size":"17px"}},P=a("p",null,[a("strong",null,[a("small",null,"Migration & Seed Console Output:")])],-1),E=a("p",null,[a("strong",null,[a("small",null,"Application Console Output:")])],-1),B=a("p",null,[a("strong",null,[a("small",null,"Installation Log Entry:")])],-1),O=a("p",null,[a("strong",null,[a("small",null,"Final .env File:")])],-1),H={class:"buttons"},W=["href"],j={key:1},R=a("input",{id:"tab1",type:"radio",name:"tabs",class:"tab-input",checked:""},null,-1),G={key:0,class:"alert alert-danger",id:"error_alert",style:{background:"#6fe373"}},J=a("h6",{style:{margin:"0",color:"#fff","font-size":"15px","line-height":"1.6em"}}," Database connection tested successfully ",-1),K=[J],Q={class:"tabs-wrap"},X={class:"tab",id:"tab1content"},Y=a("input",{type:"hidden",name:"_token",value:"{{ window.laravel }}"},null,-1),Z=a("label",{for:"app_name"}," App Name ",-1),$={key:0,class:"error-block"},ee=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),ae=a("label",{for:"app_timezone"}," App Timezone ",-1),se=["value"],te={key:0,class:"error-block"},oe=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),ne=a("label",{for:"database_connection"}," Database Connection ",-1),re=a("option",{value:"1"},"mysql",-1),ie=a("option",{value:"2"},"pgsql",-1),le=[re,ie],de={key:0,class:"error-block"},_e=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),ue=a("label",{for:"database_hostname"}," Database Host ",-1),pe={key:0,class:"error-block"},ce=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),me=a("label",{for:"database_port"}," Database Port ",-1),he={key:0,class:"error-block"},be=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),fe=a("label",{for:"database_name"}," Database Name ",-1),ge={key:0,class:"error-block"},we=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),ve=a("label",{for:"database_username"}," Database User Name ",-1),ye={key:0,class:"error-block"},ke=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),Ce=a("label",{for:"database_password"}," Database Password ",-1),ze={key:0,class:"error-block"},qe=a("i",{class:"fa fa-fw fa-exclamation-triangle","aria-hidden":"true"},null,-1),xe={key:0,class:"loader"},De={key:1,class:"buttons"},Ie=a("i",{class:"fa fa-angle-right fa-fw","aria-hidden":"true"},null,-1),Ae=a("i",{class:"fa fa-angle-right fa-fw","aria-hidden":"true"},null,-1);function Me(l,t,s,Ne,e,u){return r(),n("div",null,[e.error_message?(r(),n("div",z,[a("h6",q,[x,d(" "+_(e.error_message),1)])])):i("",!0),!e.requirements_page&&!l.permission_page&&!e.complete_installation_page?(r(),n("p",D," Welome at Doctor clinic installer , this is easy installer to help you install doctor clinic in few easy steps ")):i("",!0),e.requirements_page||l.permission_page?(r(),n("span",{key:2,innerHTML:e.page},null,8,I)):i("",!0),e.loader&&(e.requirements_page||l.permission_page)?(r(),n("div",A)):i("",!0),a("div",M,[e.requirements_page&&e.permissions_button&&!e.loader?(r(),n("a",{key:0,class:"button",onClick:t[0]||(t[0]=o=>u.permissions())},[d(" Check Permissions "),T])):i("",!0),!e.requirements_page&&!l.permission_page&&!e.complete_installation_page?(r(),n("a",{key:1,class:"button",onClick:t[1]||(t[1]=o=>u.requirements())},[d(" Start instalation "),N])):i("",!0),l.permission_page&&e.complete_installation_button&&!e.loader?(r(),n("a",{key:2,class:"button",onClick:t[2]||(t[2]=o=>u.completeInstallationPage())},[d(" Configure Environment "),S])):i("",!0),l.permission_page&&!e.complete_installation_button&&!e.loader?(r(),n("a",{key:3,class:"button",onClick:t[3]||(t[3]=o=>u.permissions()),style:{"background-color":"#fd0909"}},[d(" Retry "),U])):i("",!0)]),e.complete_installation_page?(r(),n("div",V,[e.finished?(r(),n("div",F,[e.finished?(r(),n("h6",L," Installation Finished")):i("",!0),P,a("pre",null,[a("code",null,_(e.dbOutputLog),1)]),E,a("pre",null,[a("code",null,_(e.finalMessages),1)]),B,a("pre",null,[a("code",null,_(e.finalStatusMessage),1)]),O,a("pre",null,[a("code",null,_(e.finalEnvFile),1)]),a("div",H,[a("a",{href:e.login_url,class:"button"},"Click here to exit",8,W)])])):i("",!0),e.finished?i("",!0):(r(),n("div",j,[R,e.connection_exists?(r(),n("div",G,K)):i("",!0),a("form",Q,[a("div",X,[Y,a("div",{class:p(["form-group",{"has-error":e.errors.app_name}])},[Z,c(a("input",{type:"text",name:"app_name",id:"app_name","onUpdate:modelValue":t[4]||(t[4]=o=>e.app_name=o),placeholder:"App Name"},null,512),[[m,e.app_name]]),e.errors.app_name?(r(),n("span",$,[ee,d(" "+_(e.errors.app_name),1)])):i("",!0)],2),a("div",{class:p(["form-group",{"has-error":e.errors.app_timezone}])},[ae,c(a("select",{name:"app_timezone",id:"app_timezone","onUpdate:modelValue":t[5]||(t[5]=o=>e.app_timezone=o)},[(r(!0),n(v,null,y(e.timezones,o=>(r(),n("option",{value:o},_(o),9,se))),256))],512),[[b,e.app_timezone]]),e.errors.app_timezone?(r(),n("span",te,[oe,d(" "+_(e.errors.app_timezone),1)])):i("",!0)],2),a("div",{class:p(["form-group",{"has-error":e.errors.database_connection}])},[ne,c(a("select",{name:"database_connection",id:"database_connection","onUpdate:modelValue":t[6]||(t[6]=o=>e.database_connection=o),onChange:t[7]||(t[7]=o=>u.changeDBConnection())},le,544),[[b,e.database_connection]]),e.errors.database_connection?(r(),n("span",de,[_e,d(" "+_(e.errors.database_connection),1)])):i("",!0)],2),a("div",{class:p(["form-group",{"has-error":e.errors.database_host}])},[ue,c(a("input",{type:"text",name:"database_hostname",id:"database_hostname","onUpdate:modelValue":t[8]||(t[8]=o=>e.database_host=o),placeholder:"Database Host",onInput:t[9]||(t[9]=o=>u.valuesChangedAfterTest())},null,544),[[m,e.database_host]]),e.errors.database_host?(r(),n("span",pe,[ce,d(" "+_(e.errors.database_host),1)])):i("",!0)],2),a("div",{class:p(["form-group",{"has-error":e.errors.database_port}])},[me,c(a("input",{type:"number",name:"database_port",id:"database_port","onUpdate:modelValue":t[10]||(t[10]=o=>e.database_port=o),placeholder:"Database Port",onInput:t[11]||(t[11]=o=>u.valuesChangedAfterTest())},null,544),[[m,e.database_port]]),e.errors.database_port?(r(),n("span",he,[be,d(" "+_(e.errors.database_port),1)])):i("",!0)],2),a("div",{class:p(["form-group",{"has-error":e.errors.database_name}])},[fe,c(a("input",{type:"text",name:"database_name",id:"database_name","onUpdate:modelValue":t[12]||(t[12]=o=>e.database_name=o),placeholder:"Database Name",onInput:t[13]||(t[13]=o=>u.valuesChangedAfterTest())},null,544),[[m,e.database_name]]),e.errors.database_name?(r(),n("span",ge,[we,d(" "+_(e.errors.database_name),1)])):i("",!0)],2),a("div",{class:p(["form-group",{"has-error":e.errors.database_user_name}])},[ve,c(a("input",{type:"text",name:"database_username",id:"database_username","onUpdate:modelValue":t[14]||(t[14]=o=>e.database_user_name=o),placeholder:"Database User Name",onInput:t[15]||(t[15]=o=>u.valuesChangedAfterTest())},null,544),[[m,e.database_user_name]]),e.errors.database_user_name?(r(),n("span",ye,[ke,d(" "+_(e.errors.database_user_name),1)])):i("",!0)],2),a("div",{class:p(["form-group",{"has-error":e.errors.database_password}])},[Ce,c(a("input",{type:"password",name:"database_password",id:"database_password","onUpdate:modelValue":t[16]||(t[16]=o=>e.database_password=o),placeholder:"Database Password",onInput:t[17]||(t[17]=o=>u.valuesChangedAfterTest())},null,544),[[m,e.database_password]]),e.errors.database_password?(r(),n("span",ze,[qe,d(" "+_(e.errors.database_password),1)])):i("",!0)],2),e.loader?(r(),n("div",xe)):i("",!0),e.loader?i("",!0):(r(),n("div",De,[e.connection_exists?i("",!0):(r(),n("button",{key:0,class:"button",type:"button",style:{"background-color":"#66cd66","font-size":"14px"},onClick:t[18]||(t[18]=o=>u.testConnection())},[d(" Test DB Connection "),Ie])),e.connection_exists?(r(),n("button",{key:1,class:"button",type:"button",onClick:t[19]||(t[19]=o=>u.completeInstallation())},[d(" Install "),Ae])):i("",!0)]))])])]))])):i("",!0)])}const Te=w(C,[["render",Me]]);window.__=f;const g=k({provide:{__:f}});g.component("installer",Te);g.mount("#installer");
